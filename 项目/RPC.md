功能：
服务发现：依赖于注册中心。
负载均衡：在选择具体服务端的时候，使用负载均衡策略。随机负载均衡、权重负载均衡、一致性哈希负载均衡
流量控制？？？参数路由？？？认证鉴权？？？
通信协议：自定义通信协议
可扩展设计：设计上需要做到所有功能都可扩展


config层：对外提供调用的接口。参考Dubbo提供一个RPCBootstrap、ServiceConfig、ReferenceConfig


Protocal层：
Transport层：

说一说你的负载均衡是怎么实现的？参考Dubbo的一致性负载均衡实现的，实现一个一致性hash环的数据结构，在初始化时为所有的服务器计算hash值，同时为每个服务器在hash环上插入默认160个虚拟节点。每当有请求来的时候，计算请求的hash值（请求的hash值通过参数来进行计算），然后从hash环中找到比这个请求的hash地址更高的那一个节点对应的服务器上。
[Dubbo 一致性Hash负载均衡实现剖析](https://cn.dubbo.apache.org/zh-cn/blog/2019/05/01/dubbo-%e4%b8%80%e8%87%b4%e6%80%a7hash%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1%e5%ae%9e%e7%8e%b0%e5%89%96%e6%9e%90/)

服务注册如何实现的？将服务注册到zookeeper上，路径由服务名+IP地址构成。节点类型是临时节点。

服务发现如何实现的？服务被注册到zookeeper上，从zookeeper上找到对应服务名下的所有节点，然后再从这些服务节点上利用负载均衡算法找到一个节点，返回它对应的ip和端口。

服务发生变动是如何感知的？利用PathChildrenCacheListener检测服务的变动，每当一个路径（路径即对应着一个服务）下面增加了子节点都会调用回调函数将该子节点对应的ip添加到一个map中，这个map的key就是服务名，value就是一个list，代表服务地址。


服务节点宕机了怎么办？由于我们注册服务提供者的时候使用的是zookeeper的临时节点，因此服务提供者宕机了zookeeper就会自动删除临时节点，后面的情况就和服务提供者节点正常下线是一样的了。是通过PathChildrenCacheListener一样。




服务调用失败怎么办？对于dubbo来说，服务调用失败对应的解决办法是超时重连和失败重试。



JDK动态代理的原理是什么？